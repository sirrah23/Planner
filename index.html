<html>
    <head>
        <meta charset="UTF-8"> 
        <script src="https://unpkg.com/vue"></script>
    </head>
    <body>
        <div id="planner" class="container">
            <h2>Planner</h2>
            <input v-model="item" placeholder="new item">
            <button v-on:click="add_new_item">Add Item</button>
            <input v-model="group" placeholder="new group">
            <button v-on:click="add_new_group">Add Group</button>
            <h3>Item List <button v-on:click="shuffle_items">Shuffle</button> </h3>
            <ul id="all_item_list">
                <li v-for="item in items">
                    {{item}}
                </li>    
            </ul>
            <h3>Groups</h3>
            <ul>
                <li v-for="group in groups">
                    {{group.name}}
                    <ul>
		                <li v-for="item in group.items">
			                {{item}}
		                </li>
                    </ul>
                </li>    
            </ul>
        </div>
        <script>
         const app = new Vue({
             el: "#planner",
             data: {
                item: "",
                items : [],
                group: "",
                groups: []
            },
             methods: {
                add_new_item : function(event){
                    if(this.item.length == 0)
                        return;
                    this.items.push(this.item);
                    this.item = "";
                },
                add_new_group: function(event){
                    if(this.group.length == 0)
                        return;
                	const new_group = {}
                	new_group.name = this.group;
                	new_group.items = []
                	this.groups.push(new_group);
                	this.group = "";
                },
                shuffle_items: function(event){
                    const num_groups = this.groups.length;
                	if(num_groups == 0)
                		return;
                	let curr_item, rand_idx, curr_group = 0;
                	while(this.items.length > 0){
                		rand_idx = Math.floor(Math.random() * this.items.length);
                		curr_item = this.items.splice(rand_idx, 1)[0];
                		this.groups[curr_group].items.push(curr_item);
                        curr_group = (curr_group + 1) % num_groups
                	}
                }
            },
         });
        </script>
    </body>
</html>
